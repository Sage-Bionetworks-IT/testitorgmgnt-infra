CommunityIamPasswordPolicyRP:
  Type: register-type
  SchemaHandlerPackage: s3://community-resource-provider-catalog/community-iam-passwordpolicy-0.2.0.zip
  ResourceType: 'Community::IAM::PasswordPolicy'
  MaxConcurrentTasks: 10
  OrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1

PasswordPolicy:
  Type: update-stacks
  Template: ./password-policy.yaml
  DependsOn: CommunityIamPasswordPolicyRP
  StackName: baseline-password-policy
  MaxConcurrentStacks: 10
  DefaultOrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1


CommunityIamSamlProviderRP:
  Type: register-type
  SchemaHandlerPackage: s3://community-resource-provider-catalog/community-iam-samlprovider-0.1.0.zip
  ResourceType: 'Community::IAM::SamlProvider'
  MaxConcurrentTasks: 10
  OrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1


JumpcloudIDPAdmin:
  Type: update-stacks
  Template: ./jumpcloud-idp.yaml
  DependsOn: CommunityIamSamlProviderRP
  StackName: baseline-jumpcloud-idp-admin
  MaxConcurrentStacks: 10
  Parameters:
    MetadataDocument: '<?xml version="1.0" encoding="UTF-8"?><md:EntityDescriptor xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" entityID="JumpCloud"><md:IDPSSODescriptor WantAuthnRequestsSigned="false" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol"><md:KeyDescriptor use="signing"><ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:X509Data><ds:X509Certificate>MIIFjDCCA3SgAwIBAgIUZ1RAw2jqfPP5PLJcSQypNBonbjgwDQYJKoZIhvcNAQELBQAwfjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNPMRAwDgYDVQQHEwdCb3VsZGVyMRkwFwYDVQQKExBTYWdlIEJpb25ldHdvcmtzMRkwFwYDVQQLExBKdW1wQ2xvdWRTQU1MSWRQMRowGAYDVQQDExFKdW1wQ2xvdWRTQU1MVXNlcjAeFw0yMTAxMTEyMjExMjhaFw0yNjAxMTEyMjExMjhaMH4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDTzEQMA4GA1UEBxMHQm91bGRlcjEZMBcGA1UEChMQU2FnZSBCaW9uZXR3b3JrczEZMBcGA1UECxMQSnVtcENsb3VkU0FNTElkUDEaMBgGA1UEAxMRSnVtcENsb3VkU0FNTFVzZXIwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCmN0Qf61qeAi8aFZZeK3w0aJqB9q/gXcyVx6iNSqKZ6g7eLrL70VF6rnnczJp9DJjSlpgYpmfVzPDMjRTV6GZXtuKZpCa7lL7rLtU8NiOQwxHPIKvaYbCclRT5F2YLgjfBTuHEEsm+P7pwIcWYJan9J5nd59yHxz44IMUMu2UnC3/FxOzFPb2mn/t/bmADgKVtCW/92iNdoqz5JXVJBrZegCHYcl9J45xrfUgDhMcGNCda0qzFzMJoZVIIlSRGnbFG+/yg2dPzyQMBq813fptUahRoWqJYLzqZhsG022kCN6qOjxx58xPsrtDWM0BECqOYgbK8i9ssgnuLO+iKGSHTETkFbBvDxdWijKxtZktyaMhArRJUhMv9/N6LOVLBH0EjwCAOSM0/8vINxQ+ETTOVorFGTEWJ2UXREWeD9L2Y2W1FMqCEZWQ5FGK/OT34YJDocJWq3NK42mXyVdjNMQ7gidw240WKMEKKJD1IO42kNrSW2eSEoFZ1v6tHMZD2E0o4J4ExWJHYPOAJBg5Tnh6KADV6zCxuPd4HzoNN9py4w6pYneJhy0lkmWagBn/8yJ0F/khOdaJcP/2L+YXwJuV0W2CI7gVYOLVjIcrCHLO0HNmLCKKeRJq2667oz/Z0Gog9gAG600wc3Eu3UNsU5jdguWVjN6fpHDPKuAHT8JH0JQIDAQABowIwADANBgkqhkiG9w0BAQsFAAOCAgEAZmb9aVpfUJUfAUs7jB1e9zcKDkTJvac+edpAlXJ4a3A/9yb+GhWlXCD/qZS/Ni90gOqIy94I1Iy0gYdGDrId6a6zseCEFCPFa8spIJYnGyehJ/OocSspM8gaatXVp9LilRg3rSUw6QWF3VpW/uJg5Juaz2jhWmv/L94ez7Q2rcMtWb0tj4+frHLLsU+ZyipzkI4g2tpJ41KHJD5d50yVxCHV44i6OeERZYDUQaeZ9b9SWVzwNcHJ7ZsKkt7BlnU8AmcmQgnmmv3h64r7S8f8XJmMDrha6TIMwaQ42OjV7EVxlJsWnqP0fMw/N6HGKnGzivVwlrmLinMH2kEM+6ihn/yQR3Qs9deRFyozg82DozECnuKwUllJlAvmRvmlcHMcDOreCz7RJGZJJmKz45r79gsYnEzwSLwtroyDRR472uelfBbdY65afn0JHSqifpPyWUzJUNpSG8HLHwhNh8imtqcFqT/UM5JbGe5nqusytJ2oElodWQLk5a1IAoXGR56IC4g8dbiG6piJhtcBRR3k5ijh4UReI8DExqA/BttXSIQUS/BOEazT2MD44lnFDrYAagRJyMgfKSpqwyU2bDJVaGxoHnRf/94MaG4Duo6CdbZ4cWadYb4qFYcr4MduJIBOoE+ldY+UBVYWeCALVIN2+XsjyK0+s+57HqfhYn52kmY=</ds:X509Certificate></ds:X509Data></ds:KeyInfo></md:KeyDescriptor><md:NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</md:NameIDFormat><md:SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="https://sso.jumpcloud.com/saml2/testitorgmgn-admin"/><md:SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://sso.jumpcloud.com/saml2/testitorgmgn-admin"/></md:IDPSSODescriptor></md:EntityDescriptor>'
    SamlProviderName: testitorgmgnt-admin
    SamlProviderPolicyArns:
      - arn:aws:iam::aws:policy/AdministratorAccess
  DefaultOrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1
