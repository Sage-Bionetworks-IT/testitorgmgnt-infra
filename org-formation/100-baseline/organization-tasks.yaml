CommunityIamPasswordPolicyRP:
  Type: register-type
  SchemaHandlerPackage: s3://community-resource-provider-catalog/community-iam-passwordpolicy-0.2.0.zip
  ResourceType: 'Community::IAM::PasswordPolicy'
  MaxConcurrentTasks: 10
  OrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1

PasswordPolicy:
  Type: update-stacks
  Template: ./password-policy.yaml
  DependsOn: CommunityIamPasswordPolicyRP
  StackName: baseline-password-policy
  MaxConcurrentStacks: 10
  DefaultOrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1


CommunityIamSamlProviderRP:
  Type: register-type
  SchemaHandlerPackage: s3://community-resource-provider-catalog/community-iam-samlprovider-0.1.0.zip
  ResourceType: 'Community::IAM::SamlProvider'
  MaxConcurrentTasks: 10
  OrganizationBinding:
    IncludeMasterAccount: true
    Account: '*'
    Region: us-east-1

# Disable due to issue https://github.com/org-formation/aws-resource-providers/issues/59
#JumpcloudIDPAdmin:
#  Type: update-stacks
#  Template: ./jumpcloud-idp.yaml
#  DependsOn: CommunityIamSamlProviderRP
#  StackName: baseline-testitorgmgnt-admin
#  MaxConcurrentStacks: 10
#  Parameters:
#    MetadataDocument: !ReadFile ./MetaDataDocuments/testitorgmgnt-admin.xml
#    SamlProviderName: testitorgmgnt-admin
#    SamlProviderPolicyArns:
#      - arn:aws:iam::aws:policy/AdministratorAccess
#  DefaultOrganizationBinding:
#    IncludeMasterAccount: true
#    Account: '*'
#    Region: us-east-1
